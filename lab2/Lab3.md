### Лабораторушка 3

В домашнем каталоге (`~`) создайте папку (`mkdir -p`) `lab3/repo` и перейдите в нее (`cd`).

Убедитесь, что вы находитесь в папке `repo` (`pwd`).
Создайте там гит репозиторий (`git init`)

#### Задание 1
Создайте файл `file`. Скажите гиту отслеживать его (`git add`). 
Сделайте коммит (`git commit --message "Initial commit"`).

Создайте файл `.conf`. Скажите гиту игнорировать его (`.gitignore`)

Поизменяйте файл, сделайте несколько коммитов.

Если лень писать руками воспользуйтесь скриптом ниже
```shell script
for i in {1..5}; do 
  echo "line $i" >> file; 
  git commit -am "Add commit $i"; 
done
``` 

Посмотрите историю коммитов (`git log`, `git log --oneline`).
Попросите гит показать историю только между опделенными хешами (`git log hash1..hash2`).

#### Задание 2
Перейдите на коммит `"Add commit 2"` (`git checkout hash` или `git checkout HEAD~n`).

Сделайте там тэг (`git tag`). 
Сделайте еще один тэг для `"Add commit 3"`.
Посмотрите все теги (`git tag`).


#### Задание 3
Добавьте еще пару коммитов.

Поменяйте мессадж последнего коммита (`git commit --amend`)

Поэкспериментируйте на досуге, как можно менять мессадж произвольного коммита (`git rebase -i HEAD~n`)


#### Задание 4
Выполните `git reset --hard <хеш предполследнего коммита>`. Ваш последний коммит потерян навсегда.

Но так делать нехорошо. Если хотите откатить изменения, то об этом можно попросить явно. Попробуйте

```shell script
$ git revert <нужный хеш>
```

Гит создаст еще один коммит, который откатит изменения. Историю всегда лучше дополнять, а не переписывать.

#### Задание 5
Давайте "слепим" три последних коммита в один. Это называется `squash`.

Сначала давайте отойдем на три коммита назад.
```shell script
$git reset --soft HEAD~3
```

Посмотрим статус и лог
```shell script 
$git status # или git status --short
$git log --oneline
```

Видно, что гит "отошел" на нужное число коммитов, но применил все изменения к файлу. 
Сделайте коммит.


#### Задание 6
Посмотрите что выдают (ничего)  следующие команды

```shell script
git remote
git remote -v
git remote -vv
```

Создайте новый репозиторий на гитхабе. Теперь надо "прицепить" наш локальный репозиторий к нему.
Гитхаб вам даже показывает вам инструкцию:

```
git remote add origin <ваше репо на гитхабе> # вместо origin может быть любое имя.
git branch -M master
git push -u origin master
```
Снова выполните команды `git remote [-vv]`. Что изменилось?

Создайте еще один репозиторй, и "прицепите" наш локальный репозиторий еще и к нему.

#### Задание 7
Создайте новую вертку (`git checkout -b`)

Сделайте несколько коммитов в ней. Например, поменяйте каждую четную строчку.

Сделайте  `git push`, чтобы выслать ваши изменения на гитхаб. Но пуш куда? В какой именно удаленный репозиторий?
А еще гитхаб ничего не знает про вашу новую ветку, ни в одном из репозиториев.
Надо об этом ему как-то рассказать. Разберитесь с `origin` и `--set-upsream`.

#### Задание 8
Теперь у вас на гитхабе есть две ветки. Посмотрите разницу содержимого между ними (pull-request).

#### Задание 9
Посмотрите содержимое папки `.git`.

Посмотрите, что находится в файле `HEAD` (`cat .git/HEAD`)

Посмотрите, что находится в папке `.git/refs/*`.

Посмотрите, что находится в папке `hooks`. Там должны быть примеры хуков (`*.sample`).
Чтобы сделать из этого работающий хук, удалите суффикс `*.sample` и дайте права на запуск файла (`chmod +x`)/

Пропишите во все хуки следующие строки
```shell script
#/bin/bash
echo $0 $@
```

Теперь вы будете видеть, какое действие какой хук запускает. Попробуйте повторить все действия еще раз (коммиты, пушы, хождение по веткам и дт.)
периодически заглядывая в `.git/refs/*` и `HEAD`,  а также обратите внимание на хуки.

--------

Если вы хотите поупражняться еще, Julia Evans приготовила [упражнения](https://jvns.ca/blog/2019/08/30/git-exercises--navigate-a-repository/)




